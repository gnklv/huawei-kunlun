"use strict";!function(e){var a={sectionContainer:"section",pagination:!0,keyboard:!0,loop:!1,videoF:null,videoB:null};e.fn.page_scroll=function(t){function n(a,t){var n=a.find(".anim-in"),i=a.find(".anim-out");a.addClass("active"),i.length>0&&e.each(i,function(a){var t=e(this).data("anim");e(this).removeClass("animate-"+t+"-out")}),n.length>0&&e.each(n,function(a){var t=e(this).data("anim");e(this).data("anim-delay")&&e(this).css({"-webkit-animation-delay":e(this).data("anim-delay")+"ms","animation-delay":e(this).data("anim-delay")+"ms"}),e(this).addClass("animate-"+t+"-in")}),t==v&&(e(".c-footer").removeClass("animate-up-out"),e(".c-footer").addClass("animate-up-in animate-delay"))}function i(a,t){var n=(a.find(".anim-in"),a.find(".anim-out"));setTimeout(function(){a.removeClass("active")},1e3),n.length>0&&e.each(n,function(a){var t=e(this).data("anim");e(this).addClass("animate-"+t+"-out")}),t==v&&(e(".c-footer").removeClass("animate-up-in animate-delay"),e(".c-footer").addClass("animate-up-out"))}function o(a,t){1==c.pagination&&(e(".c-pagination li a[data-index='"+a+"']").removeClass("active"),e(".c-pagination li a[data-index='"+t+"']").addClass("active"))}function d(e,a){var t=a;return p?void(t<0?r.moveDown():r.moveUp()):void e.preventDefault()}var c=e.extend({},a,t),r=e(this),l=c.videoF,s=c.videoB,u=c.sectionContainer,m=e(u),v=m.length,f="",p=!1,h=30,g=l.duration;e.fn.moveDown=function(){var a=e(u+".active").data("index"),t=e(u+"[data-index='"+a+"']"),d=e(u+"[data-index='"+(a+1)+"']");if(d.length<1){if(1!=c.loop)return;d=e(u+"[data-index='1']")}l.currentTime=t.data("time")+1,e(s).hide(),e(l).show(),t.find(".c-content__bg").hide(),i(t,t.data("index")),p=!1,l.play();var r=setInterval(function(){l.currentTime>=d.data("time")&&(l.pause(),s.currentTime=g-d.data("time"),d.find(".c-content__bg").show(),n(d,d.data("index")),p=!0,clearInterval(r))},1e3/h);o(a,d.data("index"))},e.fn.moveUp=function(){var a=e(u+".active").data("index"),t=e(u+"[data-index='"+a+"']"),d=e(u+"[data-index='"+(a-1)+"']");if(d.length<1){if(1!=c.loop)return;d=e(u+"[data-index='"+v+"']")}s.currentTime=g-t.data("time"),e(l).hide(),e(s).show(),t.find(".c-content__bg").hide(),i(t,t.data("index")),p=!1,s.play();var r=setInterval(function(){s.currentTime>=g-d.data("time")&&(s.pause(),l.currentTime=d.data("time")+1,d.find(".c-content__bg").show(),n(d,d.data("index")),p=!0,clearInterval(r))},1e3/h);o(a,d.data("index"))},e.fn.moveTo=function(a){var t=e(u+".active").data("index"),d=e(u+".active"),c=e(u+"[data-index='"+a+"']");c.length>0&&(i(d,d.data("index")),e(".c-interbg").fadeIn(300),e(l).fadeOut(),e(s).fadeOut(),d.find(".c-content__bg").fadeIn(),l.currentTime=c.data("time")+1,s.currentTime=g-c.data("time"),setTimeout(function(){c.find(".c-content__bg").fadeIn(),n(c,c.data("index")),e(".c-interbg").fadeOut(300)},1e3)),o(t,c.data("index"))},e.each(m,function(a){e(this).attr("data-index",a+1),1==c.pagination&&(f+="<li><a data-index='"+(a+1)+"' href='#"+(a+1)+"'></a></li>")});var x=e(u+"[data-index='1']");l.play();var b=setInterval(function(){l.currentTime>=x.data("time")&&(l.pause(),x.find(".c-content__bg").show(),n(x),p=!0,clearInterval(b))},100);return 1==c.pagination&&(e("ul.c-pagination").length<1&&e("<ul class='c-pagination'></ul>").prependTo("body"),e("ul.c-pagination").html(f),e('ul.c-pagination li a[data-index="1"]').addClass("active"),e(".c-pagination li a").click(function(a){if(p){a.preventDefault();var t=e(this).data("index"),n=e(u+".active");e(u+"[data-index='"+t+"']");switch(t-n.data("index")){case 1:r.moveDown();break;case-1:r.moveUp();break;default:r.moveTo(t)}}else a.preventDefault()})),e(document).bind("mousewheel DOMMouseScroll MozMousePixelScroll",function(e){e.preventDefault();var a=e.originalEvent.wheelDelta||-e.originalEvent.detail;d(e,a)}),1==c.keyboard&&e(document).keyup(function(e){if(p){var a=e.target.tagName.toLowerCase();switch(e.which){case 38:"input"!=a&&"textarea"!=a&&r.moveUp();break;case 40:"input"!=a&&"textarea"!=a&&r.moveDown();break;case 32:"input"!=a&&"textarea"!=a&&r.moveDown();break;case 33:"input"!=a&&"textarea"!=a&&r.moveUp();break;case 34:"input"!=a&&"textarea"!=a&&r.moveDown();break;case 36:r.moveTo(1);break;case 35:r.moveTo(v);break;default:return}}}),!1}}(window.jQuery),$(document).ready(function(){function e(e){e.target===r&&(o=!0),e.target===l&&(d=!0),o&&d&&(c||(a(),c=!0))}function a(){$(".c-loader").fadeOut(),$(r).show(),$("html, body").addClass("overflow"),$(".c-content").page_scroll({sectionContainer:"section.l-section",videoF:r,videoB:l})}function t(e){e.fadeIn(),e.removeClass("out"),e.addClass("open")}function n(e){e.fadeOut(),e.addClass("out"),e.removeClass("open")}function i(e){e.preventDefault();var a=$(this).serializeArray(),t={},i=$(this).attr("action");$.map(a,function(e,a){return t[e.name]=e.value}),t.method="Registration",t.phone=t.phone.replace(/\+|\(|\)|\-|\s/g,""),n(m),$.post(i,t).done(function(){console.log("Success request!")}).fail(function(){console.log("Error request!")})}var o,d,c,r=document.getElementById("video_forward"),l=document.getElementById("video_backward");r&&r.addEventListener("loadedmetadata",e),l&&l.addEventListener("loadedmetadata",e),setTimeout(function(){c||(a(),c=!0)},1e3);var s=$(".c-btn--request"),u=$(".c-modal__close"),m=$(".c-modal__overlay");s.on("click",function(e){e.preventDefault(),t(m)}),u.on("click",function(){n(m)}),$(document).on("click",function(e){switch(e.target){case $(".c-modal__overlay")[0]:case $(".c-modal__wrapper")[0]:n(m)}}),$(document).keyup(function(e){27===e.keyCode&&n(m)}),$('input[type="tel"]').mask("+7 (999) 999-99-99"),$(".c-form").on("submit",i)});
//# sourceMappingURL=../javascripts/common.js.map
