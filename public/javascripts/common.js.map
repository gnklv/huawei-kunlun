{"version":3,"sources":["common.js"],"names":["$","defaults","sectionContainer","waitTime","pagination","keyboard","loop","video","fn","page_scroll","options","init_scroll","event","delta","deltaOfInterest","timeNow","Date","getTime","canScroll","el","moveDown","moveUp","lastAnimation","preventDefault","settings","extend","this","sections","total","length","paginationList","index","data","current","next","removeClass","find","fadeOut","currentTime","play","playing","setInterval","pause","addClass","fadeIn","clearInterval","css","setTimeout","moveTo","page_index","each","i","attr","prependTo","html","click","e","document","bind","originalEvent","wheelDelta","detail","keyup","tag","target","tagName","toLowerCase","which","window","jQuery","init_video","removeEventListener","getElementById","addEventListener"],"mappings":"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","file":"../sources/common.js","sourcesContent":["!function($){\r\n\r\n  var defaults = {\r\n    sectionContainer: \"section\",\r\n    waitTime: 0,\r\n    pagination: true,\r\n    keyboard: true,\r\n    loop: false,\r\n    video: null\r\n\t};\r\n\r\n  $.fn.page_scroll = function(options){\r\n    var settings = $.extend({}, defaults, options),\r\n        el = $(this),\r\n        video = settings.video,\r\n        sections = $(settings.sectionContainer),\r\n        total = sections.length,\r\n        lastAnimation = 0,\r\n        quietPeriod = 500,\r\n        paginationList = \"\",\r\n        canScroll = false;\r\n\r\n    $.fn.moveDown = function() {\r\n      var el = $(this),\r\n\t\t      index = $(settings.sectionContainer +\".active\").data(\"index\"),\r\n\t\t      current = $(settings.sectionContainer + \"[data-index='\" + index + \"']\"),\r\n\t\t      next = $(settings.sectionContainer + \"[data-index='\" + (index + 1) + \"']\");\r\n\r\n      if(next.length < 1) {\r\n        if (settings.loop == true) {\r\n          next = $(settings.sectionContainer + \"[data-index='1']\");\r\n        } else {\r\n          return\r\n        }\r\n      }\r\n\r\n      current.removeClass(\"active\");\r\n      current.find('.c-content__wrapper').fadeOut();\r\n      canScroll = false;\r\n\r\n      video.currentTime += 1.5;\r\n      video.play();\r\n      var playing = setInterval(function() {\r\n        if (video.currentTime >= next.data('time')) {\r\n          video.pause();\r\n          next.addClass(\"active\");\r\n          next.find('.c-content__wrapper').fadeIn();\r\n          canScroll = true;\r\n          clearInterval(playing);\r\n        }\r\n      }, 100);\r\n\r\n      if(settings.pagination == true) {\r\n        $(\".c-pagination li a\" + \"[data-index='\" + index + \"']\").removeClass(\"active\");\r\n        $(\".c-pagination li a\" + \"[data-index='\" + next.data(\"index\") + \"']\").addClass(\"active\");\r\n      }\r\n    }\r\n\r\n    $.fn.moveUp = function() {\r\n      var el = $(this),\r\n\t\t      index = $(settings.sectionContainer +\".active\").data(\"index\"),\r\n\t\t      current = $(settings.sectionContainer + \"[data-index='\" + index + \"']\"),\r\n\t\t      next = $(settings.sectionContainer + \"[data-index='\" + (index - 1) + \"']\");\r\n\r\n      if(next.length < 1) {\r\n        if (settings.loop == true) {\r\n          next = $(settings.sectionContainer + \"[data-index='\"+total+\"']\");\r\n        } else {\r\n          return\r\n        }\r\n      }\r\n\r\n      /*current.removeClass(\"active\");\r\n      current.find('.c-content__wrapper').fadeOut();\r\n      canScroll = false;\r\n\r\n      var playing = setInterval(function() {\r\n        if (video.currentTime <= next.data('time')) {\r\n          next.addClass(\"active\");\r\n          next.find('.c-content__wrapper').fadeIn();\r\n          canScroll = true;\r\n          clearInterval(playing);\r\n        } else {\r\n          video.currentTime -= .1;\r\n          console.log(video.currentTime);\r\n        }\r\n      }, 30);*/\r\n\r\n      current.removeClass(\"active\");\r\n      current.find('.c-content__wrapper').fadeOut();\r\n      $('.c-stillimages').fadeIn(500);\r\n      $(video).css('display', 'none');\r\n      video.currentTime = next.data('time');\r\n      canScroll = false;\r\n      setTimeout(function() {\r\n        $(video).css('display', 'block');\r\n        next.addClass(\"active\");\r\n        next.find('.c-content__wrapper').fadeIn();\r\n        $('.c-stillimages').fadeOut(500);\r\n        canScroll = true;\r\n      }, 500);\r\n\r\n      if(settings.pagination == true) {\r\n        $(\".c-pagination li a\" + \"[data-index='\" + index + \"']\").removeClass(\"active\");\r\n        $(\".c-pagination li a\" + \"[data-index='\" + next.data(\"index\") + \"']\").addClass(\"active\");\r\n      }\r\n    }\r\n\r\n    $.fn.moveTo = function(page_index) {\r\n      var current = $(settings.sectionContainer + \".active\"),\r\n      \t\tnext = $(settings.sectionContainer + \"[data-index='\" + (page_index) + \"']\");\r\n\r\n      if(next.length > 0) {\r\n        current.removeClass(\"active\");\r\n        current.find('.c-content__wrapper').fadeOut();\r\n        $('.c-stillimages').fadeIn();\r\n        $(video).css('display', 'none');\r\n        video.currentTime = next.data('time');\r\n        setTimeout(function() {\r\n          $(video).css('display', 'block');\r\n          next.addClass(\"active\");\r\n          next.find('.c-content__wrapper').fadeIn();\r\n          $('.c-stillimages').fadeOut();\r\n        }, 500);\r\n      }\r\n\r\n     if(settings.pagination == true) {\r\n        $(\".c-pagination li a.active\").removeClass(\"active\");\r\n        $(\".c-pagination li a\" + \"[data-index='\" + page_index + \"']\").addClass(\"active\");\r\n      }\r\n    }\r\n\r\n\r\n    function init_scroll(event, delta) {\r\n        var deltaOfInterest = delta;\r\n        var timeNow = new Date().getTime();\r\n        // Cancel scroll if currently animating or within quiet period\r\n        if(!canScroll) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n\r\n        if (deltaOfInterest < 0) {\r\n          el.moveDown()\r\n        } else {\r\n          el.moveUp()\r\n        }\r\n        lastAnimation = timeNow;\r\n    }\r\n\r\n    // Prepare everything before binding wheel scroll\r\n\r\n    $.each(sections, function(i) {\r\n      $(this).attr(\"data-index\", i+1);\r\n\r\n      if(settings.pagination == true) {\r\n        paginationList += \"<li><a data-index='\"+(i+1)+\"' href='#\" + (i+1) + \"'></a></li>\"\r\n      }\r\n    });\r\n\r\n    $(settings.sectionContainer + \"[data-index='1']\").addClass(\"active\");\r\n    video.play();\r\n    var playing = setInterval(function() {\r\n      if (video.currentTime >= $(settings.sectionContainer + \"[data-index='1']\").data('time')) {\r\n        video.pause();\r\n        $(settings.sectionContainer + \"[data-index='1']\").addClass(\"active\");\r\n        $(settings.sectionContainer + \"[data-index='1']\").find('.c-content__wrapper').fadeIn();\r\n        canScroll = true;\r\n        clearInterval(playing);\r\n      }\r\n    }, 100);\r\n\r\n    if (settings.pagination == true) {\r\n      if ($('ul.c-pagination').length < 1) $(\"<ul class='c-pagination'></ul>\").prependTo(\"body\");\r\n      $('ul.c-pagination').html(paginationList);\r\n      $('ul.c-pagination li a[data-index=\"1\"]').addClass('active');\r\n    }\r\n\r\n    if(settings.pagination == true)  {\r\n      $(\".c-pagination li a\").click(function (e){\r\n        e.preventDefault();\r\n        var page_index = $(this).data(\"index\");\r\n        el.moveTo(page_index);\r\n      });\r\n    }\r\n\r\n    $(document).bind('mousewheel DOMMouseScroll MozMousePixelScroll', function(event) {\r\n      event.preventDefault();\r\n      var delta = event.originalEvent.wheelDelta || -event.originalEvent.detail;\r\n      init_scroll(event, delta);\r\n    });\r\n\r\n\r\n    if(settings.keyboard == true) {\r\n      $(document).keyup(function(e) {\r\n        var tag = e.target.tagName.toLowerCase();\r\n\r\n        switch(e.which) {\r\n          case 38:\r\n            if (tag != 'input' && tag != 'textarea') el.moveUp()\r\n          break;\r\n          case 40:\r\n            if (tag != 'input' && tag != 'textarea') el.moveDown()\r\n          break;\r\n          case 32: //spacebar\r\n            if (tag != 'input' && tag != 'textarea') el.moveDown()\r\n          break;\r\n          case 33: //pageg up\r\n            if (tag != 'input' && tag != 'textarea') el.moveUp()\r\n          break;\r\n          case 34: //page dwn\r\n            if (tag != 'input' && tag != 'textarea') el.moveDown()\r\n          break;\r\n          case 36: //home\r\n            el.moveTo(1);\r\n          break;\r\n          case 35: //end\r\n            el.moveTo(total);\r\n          break;\r\n          default: return;\r\n        }\r\n\r\n      });\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n}(window.jQuery);\r\n\r\n\r\n(function() {\r\n\tvar video = document.getElementById('video_bg');\r\n\r\n\tif (video) video.addEventListener('canplay', init_video);\r\n\r\n\r\n\tfunction init_video() {\r\n    video.removeEventListener('canplay', init_video);\r\n\r\n    $('.c-content').page_scroll({\r\n      sectionContainer: \"section.l-section\",\r\n      video: video\r\n    });\r\n  }\r\n})();\r\n"]}