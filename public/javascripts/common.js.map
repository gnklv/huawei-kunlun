{"version":3,"sources":["common.js"],"names":["$","defaults","sectionContainer","waitTime","pagination","keyboard","loop","videoF","videoB","fn","page_scroll","options","contentIn","element","elemItem","find","addClass","each","i","direction","this","data","removeClass","contentOut","setTimeout","paginationActive","n","settings","init_scroll","event","delta","deltaOfInterest","canScroll","el","moveDown","moveUp","preventDefault","extend","sections","total","length","paginationList","fps","videoDuration","duration","index","current","next","currentTime","hide","show","play","playing","setInterval","pause","clearInterval","moveTo","page_index","fadeIn","fadeOut","attr","firstElem","prependTo","html","click","e","document","bind","originalEvent","wheelDelta","detail","keyup","tag","target","tagName","toLowerCase","which","window","jQuery","init_video_f","videoForward","removeEventListener","videoBackward","getElementById","addEventListener"],"mappings":"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","file":"../sources/common.js","sourcesContent":["!function($){\r\n\r\n  var defaults = {\r\n    sectionContainer: \"section\",\r\n    waitTime: 0,\r\n    pagination: true,\r\n    keyboard: true,\r\n    loop: false,\r\n    videoF: null,\r\n    videoB: null\r\n\t};\r\n\r\n  $.fn.page_scroll = function(options){\r\n    var settings = $.extend({}, defaults, options),\r\n        el = $(this),\r\n        videoF = settings.videoF,\r\n        videoB = settings.videoB,\r\n        sections = $(settings.sectionContainer),\r\n        total = sections.length,\r\n        paginationList = \"\",\r\n        canScroll = false,\r\n        fps = 30,\r\n        videoDuration = videoF.duration;\r\n\r\n    $.fn.moveDown = function() {\r\n      var index = $(settings.sectionContainer +\".active\").data(\"index\"),\r\n\t\t      current = $(settings.sectionContainer + \"[data-index='\" + index + \"']\"),\r\n\t\t      next = $(settings.sectionContainer + \"[data-index='\" + (index + 1) + \"']\");\r\n\r\n      if(next.length < 1) {\r\n        if (settings.loop == true) {\r\n          next = $(settings.sectionContainer + \"[data-index='1']\");\r\n        } else {\r\n          return\r\n        }\r\n      }\r\n\r\n      videoF.currentTime = current.data('time') + 1;\r\n      $(videoB).hide();\r\n      $(videoF).show();\r\n\r\n      contentOut(current);\r\n      canScroll = false;\r\n\r\n      videoF.play();\r\n      var playing = setInterval(function() {\r\n        if (videoF.currentTime >= next.data('time')) {\r\n          videoF.pause();\r\n          videoB.currentTime = videoDuration - next.data('time') - 1;\r\n          contentIn(next);\r\n          canScroll = true;\r\n          clearInterval(playing);\r\n        }\r\n      }, 1000 / fps);\r\n\r\n      paginationActive(index, next.data('index'));\r\n    }\r\n\r\n    $.fn.moveUp = function() {\r\n      var index = $(settings.sectionContainer +\".active\").data(\"index\"),\r\n\t\t      current = $(settings.sectionContainer + \"[data-index='\" + index + \"']\"),\r\n\t\t      next = $(settings.sectionContainer + \"[data-index='\" + (index - 1) + \"']\");\r\n\r\n      if(next.length < 1) {\r\n        if (settings.loop == true) {\r\n          next = $(settings.sectionContainer + \"[data-index='\"+total+\"']\");\r\n        } else {\r\n          return\r\n        }\r\n      }\r\n\r\n      videoB.currentTime = videoDuration - current.data('time') - 1;\r\n      $(videoF).hide();\r\n      $(videoB).show();\r\n\r\n      contentOut(current);\r\n      canScroll = false;\r\n\r\n      videoB.play();\r\n      var playing = setInterval(function() {\r\n        if (videoB.currentTime >= videoDuration - next.data('time')) {\r\n          videoB.pause();\r\n          videoF.currentTime = next.data('time') + 1;\r\n          contentIn(next);\r\n          canScroll = true;\r\n          clearInterval(playing);\r\n        }\r\n      }, 1000 / fps);\r\n\r\n      paginationActive(index, next.data('index'));\r\n    }\r\n\r\n    $.fn.moveTo = function(page_index) {\r\n      var index = $(settings.sectionContainer +\".active\").data(\"index\"),\r\n          current = $(settings.sectionContainer + \".active\"),\r\n      \t\tnext = $(settings.sectionContainer + \"[data-index='\" + page_index + \"']\");\r\n\r\n      if(next.length > 0) {\r\n        contentOut(current);\r\n        $('.c-interbg').fadeIn(500);\r\n        $(videoF).hide();\r\n        $(videoB).hide();\r\n        videoF.currentTime = next.data('time') + 1;\r\n        videoB.currentTime = videoDuration - next.data('time') - 1;\r\n        setTimeout(function() {\r\n          $(videoF).show();\r\n          contentIn(next);\r\n          $('.c-interbg').fadeOut(500);\r\n        }, 500);\r\n      }\r\n\r\n      paginationActive(index, next.data('index'));\r\n    }\r\n\r\n    function contentIn (element) {\r\n      var elemItem = element.find('.c-content__item');\r\n\r\n      element.addClass(\"active\");\r\n\r\n      $.each(elemItem, function(i) {\r\n        var direction = $(this).data('anim');\r\n\r\n        if ($(this).data('anim-delay')) {\r\n          $(this).addClass('animate-delay');\r\n        }\r\n\r\n        $(this).removeClass('animate-'+ direction +'-out');\r\n        $(this).addClass('animate-'+ direction +'-in');\r\n      });\r\n    }\r\n\r\n    function contentOut(element) {\r\n      var elemItem = element.find('.c-content__item');\r\n\r\n      setTimeout(function() {\r\n        element.removeClass(\"active\");\r\n      }, 1000);\r\n\r\n      $.each(elemItem, function(i) {\r\n        var direction = $(this).data('anim');\r\n\r\n        $(this).removeClass('animate-delay');\r\n        $(this).addClass('animate-'+ direction +'-out');\r\n        $(this).removeClass('animate-'+ direction +'-in');\r\n      });\r\n    }\r\n\r\n    function paginationActive(i, n) {\r\n      if(settings.pagination == true) {\r\n        $(\".c-pagination li a\" + \"[data-index='\" + i + \"']\").removeClass(\"active\");\r\n        $(\".c-pagination li a\" + \"[data-index='\" + n + \"']\").addClass(\"active\");\r\n      }\r\n    }\r\n\r\n    function init_scroll(event, delta) {\r\n        var deltaOfInterest = delta;\r\n\r\n        if(!canScroll) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n\r\n        if (deltaOfInterest < 0) {\r\n          el.moveDown();\r\n        } else {\r\n          el.moveUp();\r\n        }\r\n    }\r\n\r\n    $.each(sections, function(i) {\r\n      $(this).attr(\"data-index\", i+1);\r\n\r\n      if(settings.pagination == true) {\r\n        paginationList += \"<li><a data-index='\"+(i+1)+\"' href='#\" + (i+1) + \"'></a></li>\"\r\n      }\r\n    });\r\n\r\n    var firstElem = $(settings.sectionContainer + \"[data-index='1']\");\r\n\r\n    videoF.play();\r\n    var playing = setInterval(function() {\r\n      if (videoF.currentTime >= firstElem.data('time')) {\r\n        videoF.pause();\r\n        contentIn(firstElem);\r\n        canScroll = true;\r\n        clearInterval(playing);\r\n      }\r\n    }, 100);\r\n\r\n    if (settings.pagination == true) {\r\n      if ($('ul.c-pagination').length < 1) $(\"<ul class='c-pagination'></ul>\").prependTo(\"body\");\r\n      $('ul.c-pagination').html(paginationList);\r\n      $('ul.c-pagination li a[data-index=\"1\"]').addClass('active');\r\n\r\n      $(\".c-pagination li a\").click(function (e){\r\n        if(!canScroll) {\r\n          e.preventDefault();\r\n        } else {\r\n          e.preventDefault();\r\n\r\n          var page_index = $(this).data(\"index\");\r\n          var current = $(settings.sectionContainer + \".active\"),\r\n              next = $(settings.sectionContainer + \"[data-index='\" + (page_index) + \"']\");\r\n\r\n          switch(page_index - current.data('index')) {\r\n            case 1:\r\n              el.moveDown();\r\n              break;\r\n            case -1:\r\n              el.moveUp();\r\n              break;\r\n            default: \r\n              el.moveTo(page_index)\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    $(document).bind('mousewheel DOMMouseScroll MozMousePixelScroll', function(event) {\r\n      event.preventDefault();\r\n      var delta = event.originalEvent.wheelDelta || -event.originalEvent.detail;\r\n      init_scroll(event, delta);\r\n    });\r\n\r\n\r\n    if(settings.keyboard == true) {\r\n      $(document).keyup(function(e) {\r\n        if(!canScroll) {\r\n          return;\r\n        } else {\r\n          var tag = e.target.tagName.toLowerCase();\r\n\r\n          switch(e.which) {\r\n            case 38:\r\n              if (tag != 'input' && tag != 'textarea') el.moveUp()\r\n            break;\r\n            case 40:\r\n              if (tag != 'input' && tag != 'textarea') el.moveDown()\r\n            break;\r\n            case 32: //spacebar\r\n              if (tag != 'input' && tag != 'textarea') el.moveDown()\r\n            break;\r\n            case 33: //pageg up\r\n              if (tag != 'input' && tag != 'textarea') el.moveUp()\r\n            break;\r\n            case 34: //page dwn\r\n              if (tag != 'input' && tag != 'textarea') el.moveDown()\r\n            break;\r\n            case 36: //home\r\n              el.moveTo(1);\r\n            break;\r\n            case 35: //end\r\n              el.moveTo(total);\r\n            break;\r\n            default: return;\r\n          }\r\n        }\r\n      });\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n}(window.jQuery);\r\n\r\n\r\n(function() {\r\n\tvar videoForward = document.getElementById('video_forward'),\r\n      videoBackward = document.getElementById('video_backward');\r\n\r\n\tif (videoForward) videoForward.addEventListener('canplay', init_video_f);\r\n\r\n  function init_video_f() {\r\n    videoForward.removeEventListener('canplay', init_video_f);\r\n\r\n    $(videoForward).show();\r\n    $('html, body').addClass('overflow');\r\n    $('.c-loader').fadeOut();\r\n    $('.c-content').page_scroll({\r\n      sectionContainer: \"section.l-section\",\r\n      videoF: videoForward,\r\n      videoB: videoBackward\r\n    });\r\n  }\r\n})();\r\n"]}